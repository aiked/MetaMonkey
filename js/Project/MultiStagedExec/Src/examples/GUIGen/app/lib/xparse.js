function _element(){this.type="element",this.name=new String,this.attributes=new Array,this.contents=new Array,this.uid=_Xparse_count++,_Xparse_index[this.uid]=this}function _chardata(){this.type="chardata",this.value=new String}function _pi(){this.type="pi",this.value=new String}function _comment(){this.type="comment",this.value=new String}function _frag(){this.str=new String,this.ary=new Array,this.end=new String}function Xparse(t){var n=new _frag;n.str=_prolog(t);var r=new _element;return r.name="ROOT",n=_compile(n),r.contents=n.ary,r.index=_Xparse_index,_Xparse_index=new Array,r}function _compile(t){for(;;){if(0==t.str.length)return t;var n=t.str.indexOf("<");if(0!=n){var r=t.ary.length;t.ary[r]=new _chardata,-1==n?(t.ary[r].value=_entity(t.str),t.str=""):(t.ary[r].value=_entity(t.str.substring(0,n)),t.str=t.str.substring(n,t.str.length))}else if("?"==t.str.substring(1,2))t=_tag_pi(t);else if("!--"==t.str.substring(1,4))t=_tag_comment(t);else if("![CDATA["==t.str.substring(1,9))t=_tag_cdata(t);else{if(t.str.substring(1,t.end.length+3)=="/"+t.end+">"||_strip(t.str.substring(1,t.end.length+3))=="/"+t.end)return t.str=t.str.substring(t.end.length+3,t.str.length),t.end="",t;t=_tag_element(t)}}return""}function _tag_element(t){var n=t.str.indexOf(">"),r="/"==t.str.substring(n-1,n);r&&(n-=1);var e=_normalize(t.str.substring(1,n)),i=e.indexOf(" "),s=new String,a=new String;-1!=i?(a=e.substring(0,i),s=e.substring(i+1,e.length)):a=e;var u=t.ary.length;if(t.ary[u]=new _element,t.ary[u].name=_strip(a),s.length>0&&(t.ary[u].attributes=_attribution(s)),r)t.str=t.str.substring(n+2,t.str.length);else{var g=new _frag;g.str=t.str.substring(n+1,t.str.length),g.end=a,g=_compile(g),t.ary[u].contents=g.ary,t.str=g.str}return t}function _tag_pi(t){var n=t.str.indexOf("?>"),r=t.str.substring(2,n),e=t.ary.length;return t.ary[e]=new _pi,t.ary[e].value=r,t.str=t.str.substring(n+2,t.str.length),t}function _tag_comment(t){var n=t.str.indexOf("-->"),r=t.str.substring(4,n),e=t.ary.length;return t.ary[e]=new _comment,t.ary[e].value=r,t.str=t.str.substring(n+3,t.str.length),t}function _tag_cdata(t){var n=t.str.indexOf("]]>"),r=t.str.substring(9,n),e=t.ary.length;return t.ary[e]=new _chardata,t.ary[e].value=r,t.str=t.str.substring(n+3,t.str.length),t}function _attribution(t){for(var n=new Array;;){var r=t.indexOf("=");if(0==t.length||-1==r)return n;var e=t.indexOf("'"),i=t.indexOf('"'),s=new Number,a=new String;(i>e&&-1!=e||-1==i)&&(s=e,a="'"),(e>i||-1==e)&&-1!=i&&(s=i,a='"');var u=t.indexOf(a,s+1),g=t.substring(s+1,u),l=_strip(t.substring(0,r));n[l]=_entity(g),t=t.substring(u+1,t.length)}return""}function _prolog(t){var n=new Array;n=t.split("\r\n"),t=n.join("\n"),n=t.split("\r"),t=n.join("\n");var r=t.indexOf("<");if("<?x"==t.substring(r,r+3)||"<?X"==t.substring(r,r+3)){var e=t.indexOf("?>");t=t.substring(e+2,t.length)}var r=t.indexOf("<!DOCTYPE");if(-1!=r){var e=t.indexOf(">",r)+1,i=t.indexOf("[",r);e>i&&-1!=i&&(e=t.indexOf("]>",r)+2),t=t.substring(e,t.length)}return t}function _strip(t){var n=new Array;return n=t.split("\n"),t=n.join(""),n=t.split(" "),t=n.join(""),n=t.split("	"),t=n.join("")}function _normalize(t){var n=new Array;return n=t.split("\n"),t=n.join(" "),n=t.split("	"),t=n.join(" ")}function _entity(t){var n=new Array;return n=t.split("&lt;"),t=n.join("<"),n=t.split("&gt;"),t=n.join(">"),n=t.split("&quot;"),t=n.join('"'),n=t.split("&apos;"),t=n.join("'"),n=t.split("&amp;"),t=n.join("&")}var _Xparse_count=0,_Xparse_index=new Array;